<!DOCTYPE html>
<html>
<head>
</head>
<body>
<form>
    Type here <input type="text" size="50"><br><br>
    Type here as well <input type="text" size="50">
</form>
<textarea>Hi There</textarea>

<div contenteditable="true">contenteditable div</div>
<div>INFO</div>
<div id="info">
   <div id=inner-text></div>
   <div id=active-tag></div>
   <div id=window-selection></div>
   <div id=char-at></div>
</div>
   <script>
      document.body.addEventListener("keyup", function(e)
      {
         info(e);
      });

      function insert(id, prefix, text)
      {
         document.getElementById(id).innerHTML = prefix + ": " + JSON.stringify(text);
      }

      function parens(str)
      {
         return "(" + str + ")";
      }
      function info(event)
      {
         let text = window.getSelection().anchorNode.textContent;
         let caret = window.getSelection().anchorOffset;
         insert("inner-text", "PARENT DIV",
            event.target.innerText + parens(event.target.innerText.length));
         insert("active-tag", "ACTIVE DIV", text + parens(text.length));
         insert("window-selection", "SELECTION", caret);
         insert("char-at", "CHAR AT", text.charAt(caret));
      }

   </script>
</body>
</html>
