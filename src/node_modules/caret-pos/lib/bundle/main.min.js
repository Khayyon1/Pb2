!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e["caret-pos"]={})}(this,function(e){"use strict";var d=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],g=function(t,e){var o,n,i,r=document.createElement("div");return o=e,n={position:"absolute",left:-9999,top:0,zIndex:-2e3},"TEXTAREA"===t.tagName&&d.push("width"),d.forEach(function(e){n[e]=getComputedStyle(t)[e]}),i=n,Object.keys(i).forEach(function(e){r.style[e]=i[e]}),r.innerHTML=o,t.parentNode.insertBefore(r,t.nextSibling),{rect:function(){var e=r.ownerDocument.getElementById("caret-position-marker"),t={left:e.offsetLeft,top:e.offsetTop,height:e.offsetHeight};return r.parentNode.removeChild(r),t}}},t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.customPos,o=e.iframe,n=e.noShadowCaret;return o?{iframe:o,window:o.contentWindow,document:o.contentDocument||o.contentWindow.document,noShadowCaret:n,customPos:t}:{window:window,document:document,noShadowCaret:n,customPos:t}},i=function(e,t){var o=t&&t.window||window,n=t&&t.document||document,i=e.getBoundingClientRect(),r=n.documentElement,d=o.pageXOffset||r.scrollLeft,f=o.pageYOffset||r.scrollTop;return{top:i.top+f,left:i.left+d}},f=function(e){return"object"===(void 0===e?"undefined":t(e))&&null!==e},a=function(e,t){return(o=e).contentEditable&&"true"===o.contentEditable?(c=e,s=t,{getPos:d=function(){var e=u(),t=e.cloneRange();t.selectNodeContents(c),t.setEnd(e.endContainer,e.endOffset);var o=t.toString().length;return t.detach(),o},setPos:function(d){var f=s.window.getSelection();if(f){var a=0,l=!1;!function e(t,o){for(var n=0;n<o.childNodes.length;n++){var i=o.childNodes[n];if(l)break;if(3===i.nodeType){if(a+i.length>=t){l=!0;var r=s.document.createRange();r.setStart(i,t-a),f.removeAllRanges(),f.addRange(r);break}a+=i.length}else e(d,i)}}(d,c)}return c},getPosition:function(){var e=r(),t=d(),o=c.getBoundingClientRect(),n=o.top+s.document.body.scrollTop,i=o.left+s.document.body.scrollLeft;return e.left-=i,e.top-=n,e.pos=t,e},getOffset:r=function(){var e=u(),t={height:0,left:0,right:0};if(!e)return t;var o=s.customPos||0===s.customPos;if(0<e.endOffset-1&&e.endContainer!==c||o){var n=e.cloneRange(),i=o?s.customPos:e.endOffset;n.setStart(e.endContainer,i-1<0?0:i-1),n.setEnd(e.endContainer,i);var r=n.getBoundingClientRect();t={height:r.height,left:r.left+r.width,top:r.top},n.detach()}if((!t||t&&0===t.height)&&!s.noShadowCaret){var d=e.cloneRange(),f=s.document.createTextNode("|");d.insertNode(f),d.selectNode(f);var a=d.getBoundingClientRect();t={height:a.height,left:a.left,top:a.top},f.parentNode.removeChild(f),d.detach()}if(t){var l=s.document.documentElement;t.top+=s.window.pageYOffset-(l.clientTop||0),t.left+=s.window.pageXOffset-(l.clientLeft||0)}return t},getRange:u=function(){if(s.window.getSelection){var e=s.window.getSelection();return 0<e.rangeCount?e.getRangeAt(0):null}}}):(f=e,a=t,n=function(e){var t=function(e){return e.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>")};(a.customPos||0===a.customPos)&&(e=a.customPos);var o=void 0===e?l():e,n=f.value.slice(0,o),i=f.value.slice(o),r='<span style="position: relative; display: inline;">'+t(n)+"</span>";r+='<span id="caret-position-marker" style="position: relative; display: inline;">|</span>',r+='<span style="position: relative; display: inline;">'+t(i)+"</span>";var d=g(f,r).rect();return d.pos=l(),d},{getPos:l=function(){return f.selectionStart},setPos:function(e){return f.setSelectionRange(e,e),f},getOffset:function(e){var t=i(f),o=n(e);return{top:t.top+o.top+a.document.body.scrollTop,left:t.left+o.left+a.document.body.scrollLeft,height:o.height}},getPosition:n});var c,s,r,u,d,o,f,a,l,n};e.position=function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};f(t)&&(o=t,t=null);var n=r(o),i=a(e,n);return t||0===t?i.setPos(t):i.getPosition()},e.offset=function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};f(t)&&(o=t,t=null);var n=r(o);return a(e,n).getOffset(t)},e.getOffset=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=main.min.js.map
